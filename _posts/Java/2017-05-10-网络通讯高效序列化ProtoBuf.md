---
layout: post
title: 网络通讯高效序列化类protobuf
categories: Java
description: 网络通讯高效序列化类protobuf
---
## 简介
在http网络通讯时，一般使用Json或高效序列化类的方式对数据进行传输，高效序列化类比较流行的是谷歌的protocol buffer与spark的kryo。下面介绍一下protocol buffer，当对数据的描述由使用JSON改为Protobuf，这样就可通过IDL实现强制约束，包括数据类型、字段命名等，相比json格式protocol字段格式相对固定。
### 优点
protobuf 不管是处理时间上，还是空间占用上都优于现有的其他序列化方式。内存暂用是java 序列化的1/9，时间也是差了一个数量级，一次操作在1us左右。
### 缺点
缺点：就是对象结构体有限制，只适合于内部系统使用。
## 使用方法
先生成一个.proto
## 核心概念
1，.proto文件5/10/2017 10:44:16 PM 
相当于确定数据协议，数据结构中存在哪些数据，数据类型是怎么样

2，modifiers
- 2.1. required 不可以增加或删除的字段，必须初始化
- 2.2  optional 可选字段，可删除，可以不初始化
- 2.3  repeated 可重复字段， 对应到java文件里，生成的是List

3，Message
在proto文件里，数据的协议时以Message的形式表现的。

4， Build
生成具体的java类时，例如Person.java，同时会存在build方法。文档的意思是对于转化后的数据，具有唯一性，build提供了便利的方法来初始化这些数据。
## referrs
http://www.aboutyun.com/thread-8212-1-1.html

